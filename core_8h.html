<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9"/>
<title>BSPACM: include/bspacm/core.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSPACM
   &#160;<span id="projectnumber">20150113</span>
   </div>
   <div id="projectbrief">Board Support Package for ARM Cortex-M Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_84644856a1893ae35ec50fa71777950a.html">bspacm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">core.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Common header included by all BSPACM leaf headers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;bspacm/device.h&gt;</code><br />
<code>#include &lt;<a class="el" href="config_8h_source.html">bspacm/config.h</a>&gt;</code><br />
</div>
<p><a href="core_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1d7c3e78ed005aa264211e43bf2a64c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a>&#160;&#160;&#160;__inline__</td></tr>
<tr class="separator:a1d7c3e78ed005aa264211e43bf2a64c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33aec9db511c37252fe188e680170085"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a33aec9db511c37252fe188e680170085">BSPACM_CORE_INLINE_FORCED</a>&#160;&#160;&#160;<a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> __attribute__((__always_inline__))</td></tr>
<tr class="separator:a33aec9db511c37252fe188e680170085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a067cdbba9dbc1fb5b12afea1b3faa27f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a067cdbba9dbc1fb5b12afea1b3faa27f">BSPACM_CORE_PACKED_STRUCT</a>(nm_)&#160;&#160;&#160;struct __attribute__((__packed__)) nm_</td></tr>
<tr class="separator:a067cdbba9dbc1fb5b12afea1b3faa27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10e38a7c4509a2793b17bd1c1f89bc3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a10e38a7c4509a2793b17bd1c1f89bc3c">BSPACM_CORE_ALIGNED_OBJECT</a>(sz_)&#160;&#160;&#160;__attribute__((__aligned__(sz_)))</td></tr>
<tr class="separator:a10e38a7c4509a2793b17bd1c1f89bc3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334d2789d3560b3630f2c1c633c3998a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a334d2789d3560b3630f2c1c633c3998a">BSPACM_VERSION</a>&#160;&#160;&#160;20150113</td></tr>
<tr class="separator:a334d2789d3560b3630f2c1c633c3998a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62b35cf6685650b3c9a7b38699c6c0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#aa62b35cf6685650b3c9a7b38699c6c0f">BSPACM_CORE_DISABLE_INTERRUPT</a>()&#160;&#160;&#160;__disable_irq()</td></tr>
<tr class="separator:aa62b35cf6685650b3c9a7b38699c6c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52275d819776e77d27303749a51965a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#ab52275d819776e77d27303749a51965a">BSPACM_CORE_ENABLE_INTERRUPT</a>()&#160;&#160;&#160;__enable_irq()</td></tr>
<tr class="separator:ab52275d819776e77d27303749a51965a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a756afbc2b8e4b3e0ebf69e42bd3468"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a9a756afbc2b8e4b3e0ebf69e42bd3468">BSPACM_CORE_SAVED_INTERRUPT_STATE</a>(var_)&#160;&#160;&#160;unsigned int const var_ = __get_PRIMASK()</td></tr>
<tr class="separator:a9a756afbc2b8e4b3e0ebf69e42bd3468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7774eaf391d7ad86abce29d8f0542aab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a7774eaf391d7ad86abce29d8f0542aab">BSPACM_CORE_RESTORE_INTERRUPT_STATE</a>(var_)</td></tr>
<tr class="separator:a7774eaf391d7ad86abce29d8f0542aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7281bb17c886941c500c4d545511f03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#ac7281bb17c886941c500c4d545511f03">BSPACM_CORE_REENABLE_INTERRUPT</a>(var_)</td></tr>
<tr class="separator:ac7281bb17c886941c500c4d545511f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a772e089aed4ed7d653db94d9415614f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a772e089aed4ed7d653db94d9415614f3">BSPACM_CORE_SLEEP</a>()</td></tr>
<tr class="separator:a772e089aed4ed7d653db94d9415614f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d56bececfd4defe714af6899e1906cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a4d56bececfd4defe714af6899e1906cb">BSPACM_CORE_DEEP_SLEEP</a>()</td></tr>
<tr class="separator:a4d56bececfd4defe714af6899e1906cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb8c56bb7c6efaa0e960a7efc3d864f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#acb8c56bb7c6efaa0e960a7efc3d864f8">BSPACM_CORE_SUPPORTS_CYCCNT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:acb8c56bb7c6efaa0e960a7efc3d864f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b725e1931a9b1a416bdd495390ced7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#ad9b725e1931a9b1a416bdd495390ced7">BSPACM_CORE_ENABLE_CYCCNT</a>()&#160;&#160;&#160;do { } while (0)</td></tr>
<tr class="separator:ad9b725e1931a9b1a416bdd495390ced7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cae26f54d0e526fa09ee2df92c6299c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a6cae26f54d0e526fa09ee2df92c6299c">BSPACM_CORE_DISABLE_CYCCNT</a>()&#160;&#160;&#160;do { } while (0)</td></tr>
<tr class="separator:a6cae26f54d0e526fa09ee2df92c6299c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63f9aa24006f142cb9c6e7793daf63a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#af63f9aa24006f142cb9c6e7793daf63a">BSPACM_CORE_CYCCNT</a>()&#160;&#160;&#160;0</td></tr>
<tr class="separator:af63f9aa24006f142cb9c6e7793daf63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71408fa62082f2087fdacb2399b81774"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a71408fa62082f2087fdacb2399b81774">BSPACM_CORE_DELAY_CYCLES</a>(cycles_)</td></tr>
<tr class="separator:a71408fa62082f2087fdacb2399b81774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00fcb6f950ca59704f562503ced79c98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a00fcb6f950ca59704f562503ced79c98">BSPACM_CORE_BITBAND_SRAM32</a>(object_,  bit_)&#160;&#160;&#160;(*(volatile uint32_t *)BSPACM_CORE_BITBAND_SRAM_(object_, bit_))</td></tr>
<tr class="separator:a00fcb6f950ca59704f562503ced79c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bb5b4354ca12329ada738589114255"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a99bb5b4354ca12329ada738589114255">BSPACM_CORE_BITBAND_SRAM16</a>(object_,  bit_)&#160;&#160;&#160;(*(volatile uint16_t *)BSPACM_CORE_BITBAND_SRAM_(object_, bit_))</td></tr>
<tr class="separator:a99bb5b4354ca12329ada738589114255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70d8ed452338bdfcafe72fd7381bfada"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a70d8ed452338bdfcafe72fd7381bfada">BSPACM_CORE_BITBAND_SRAM8</a>(object_,  bit_)&#160;&#160;&#160;(*(volatile uint8_t *)BSPACM_CORE_BITBAND_SRAM_(object_, bit_))</td></tr>
<tr class="separator:a70d8ed452338bdfcafe72fd7381bfada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f509ffb0add02384773f2d9cf28713"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a55f509ffb0add02384773f2d9cf28713">BSPACM_CORE_BITBAND_PERIPH</a>(object_,  bit_)&#160;&#160;&#160;(*(volatile uint32_t *)(BSPACM_CORE_PERIPH_BITBAND_BASE + 4 * ((bit_) + 8 * ((uintptr_t)&amp;(object_) - BSPACM_CORE_PERIPH_BASE))))</td></tr>
<tr class="separator:a55f509ffb0add02384773f2d9cf28713"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7645482c1c93f154e1123e8dab961024"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#a7645482c1c93f154e1123e8dab961024">uiBSPACMcoreBitFromMask</a> (uint32_t mask)</td></tr>
<tr class="separator:a7645482c1c93f154e1123e8dab961024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf190c3bf1c993ad3f110e995698fd76"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="core_8h.html#adf190c3bf1c993ad3f110e995698fd76">vBSPACMcoreSetPinNybble</a> (volatile uint32_t *basep, unsigned int pin, unsigned int value)</td></tr>
<tr class="separator:adf190c3bf1c993ad3f110e995698fd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Common header included by all BSPACM leaf headers. </p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bspacm">http://github.com/pabigot/bspacm</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a10e38a7c4509a2793b17bd1c1f89bc3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_ALIGNED_OBJECT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sz_</td><td>)</td>
          <td>&#160;&#160;&#160;__attribute__((__aligned__(sz_)))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declare an aligned object a toolchain-specific manner.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sz_</td><td>alignment requirements in bytes. E.g. to ensure the lower 10 bits of the address are zero, use 1024.</td></tr>
  </table>
  </dd>
</dl>
<p>This expands to a toolchain-specific directive that controls the alignment of the following object definition. It is used for structures that are placed in system memory but accessed through peripherals, such as the micro-DMA peripheral. </p>

</div>
</div>
<a class="anchor" id="a55f509ffb0add02384773f2d9cf28713"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_BITBAND_PERIPH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(volatile uint32_t *)(BSPACM_CORE_PERIPH_BITBAND_BASE + 4 * ((bit_) + 8 * ((uintptr_t)&amp;(object_) - BSPACM_CORE_PERIPH_BASE))))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit-band reference into a peripheral register.</p>
<p>This is particularly useful to reduce code size when the bit and the peripheral register address are compile-time constants, as a read-modify-write instruction sequence will be replaced by a single store.</p>
<dl class="section note"><dt>Note</dt><dd>Only supported on processors that use bit-banding (e.g. Cortex-M3, Cortex-M4). This macro will not be defined if the feature is not supported.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Not all peripherals will support bit-banding.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_</td><td>a reference to the peripheral register (not its address).</td></tr>
    <tr><td class="paramname">bit_</td><td>the bit of interest within <code>object_</code> (0 to 31)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an lvalue reference to a volatile <code>uint32_t</code> object in which bit 0 aliases bit <code>bit_</code> of <code>object_</code> and no other bits are used. </dd></dl>

</div>
</div>
<a class="anchor" id="a99bb5b4354ca12329ada738589114255"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_BITBAND_SRAM16</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(volatile uint16_t *)BSPACM_CORE_BITBAND_SRAM_(object_, bit_))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit-band reference into an 16-bit object in SRAM.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="core_8h.html#a00fcb6f950ca59704f562503ced79c98">BSPACM_CORE_BITBAND_SRAM32</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a00fcb6f950ca59704f562503ced79c98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_BITBAND_SRAM32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(volatile uint32_t *)BSPACM_CORE_BITBAND_SRAM_(object_, bit_))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit-band reference into an 32-bit object in SRAM.</p>
<p>This is particularly useful when manipulating a single flag in a volatile object aggregating event flags while interrupts are enabled.</p>
<dl class="section note"><dt>Note</dt><dd>Only supported on processors that use bit-banding (e.g. Cortex-M3, Cortex-M4). This macro will not be defined if the feature is not supported.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_</td><td>a reference to (not the address of) a 32-bit object located in SRAM</td></tr>
    <tr><td class="paramname">bit_</td><td>the bit of interest within <code>object_</code> (0 to 31, depending on size of object)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an lvalue reference to a volatile <code>bool</code> object in which bit 0 aliases bit <code>bit_</code> of <code>object_</code> and no other bits are used. </dd></dl>

</div>
</div>
<a class="anchor" id="a70d8ed452338bdfcafe72fd7381bfada"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_BITBAND_SRAM8</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">object_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(volatile uint8_t *)BSPACM_CORE_BITBAND_SRAM_(object_, bit_))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit-band reference into an 8-bit object in SRAM.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="core_8h.html#a00fcb6f950ca59704f562503ced79c98">BSPACM_CORE_BITBAND_SRAM32</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af63f9aa24006f142cb9c6e7793daf63a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_CYCCNT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current value of the cycle counter.</p>
<p>This returns a constant 0 if the cycle counter is not supported. (It returns an arbitrary constant if the cycle counter is supported but you didn't invoke <a class="el" href="core_8h.html#ad9b725e1931a9b1a416bdd495390ced7">BSPACM_CORE_ENABLE_CYCCNT()</a>).</p>
<dl class="section user"><dt>Dependency:</dt><dd>BSPACM_CORE_SUPPORTS_CYCCNT </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="core_8h.html#ad9b725e1931a9b1a416bdd495390ced7">BSPACM_CORE_ENABLE_CYCCNT()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a4d56bececfd4defe714af6899e1906cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_DEEP_SLEEP</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                           \</div>
<div class="line">    uint32_t in_sleepdeep = (SCB-&gt;SCR &amp; SCB_SCR_SLEEPDEEP_Msk); \</div>
<div class="line">    SCB-&gt;SCR |= SCB_SCR_SLEEPDEEP_Msk;                          \</div>
<div class="line">    __WFI();                                                    \</div>
<div class="line">    SCB-&gt;SCR &amp;= ~in_sleepdeep;                                  \</div>
<div class="line">  } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment --><p>Enter the Cortex-M deep sleep mode.</p>
<p>The specific effect of this is vendor-specific, but in concept it turns off the processor clock and any number of other clocks. The implementation may map to a vendor-specific function or macro, but is expected to be roughly equivalent to invoking the ARM instruction <code>WFI</code> (or <code>WFE</code>) with the <code>SLEEPDEEP</code> bit of the System Control Register set.</p>
<dl class="section warning"><dt>Warning</dt><dd>The implementation of this operation is device-specific. In particular, it may include restoration of some or all peripheral clocks.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The user should be aware of the effect of this operation on the hardware an application targets. Interrupts that cause wakeup will, if not masked through <code>PRIMASK</code>, be executed prior to control returning to the point following the <code>__WFI()</code> operation, meaning that any clocks disabled by the operation will not be restored until interrupt processing completes and control returns to the remainder of this macro.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Although some vendor implementations may leave the <code>SLEEPDEEP</code> bit set, it SHOULD be restored to its original state in the BSPACM implementation of this macro so that subsequent use of <code>__WFI()</code> and <code>__WFE()</code> executes regular or deep sleep in accordance with the original setting.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CHDJJHJI.html">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CHDJJHJI.html</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a71408fa62082f2087fdacb2399b81774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_DELAY_CYCLES</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cycles_</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {  \</div>
<div class="line">    uint32_t <span class="keyword">const</span> cycles_per_iter = 3;         \</div>
<div class="line">    uint32_t remaining = (cycles_);             \</div>
<div class="line">    while (remaining &gt; cycles_per_iter) {       \</div>
<div class="line">      remaining -= cycles_per_iter;             \</div>
<div class="line">    }                                           \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Delay for a specified number of cycles.</p>
<p>This does not attempt to account for the overhead of the loop.</p>
<dl class="section warning"><dt>Warning</dt><dd>On architectures that do not support a cycle counter, this is a rough estimate based on cycles-per-iteration of a loop. </dd></dl>

</div>
</div>
<a class="anchor" id="a6cae26f54d0e526fa09ee2df92c6299c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_DISABLE_CYCCNT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;do { } while (0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Functional macro to disable the cycle-counting capability of the core Data Watchpoint and Trace unit. </p>

</div>
</div>
<a class="anchor" id="aa62b35cf6685650b3c9a7b38699c6c0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_DISABLE_INTERRUPT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;__disable_irq()</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gratuitous alternative spelling of standard CMSIS core intrinsic. </p>

</div>
</div>
<a class="anchor" id="ad9b725e1931a9b1a416bdd495390ced7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_ENABLE_CYCCNT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;do { } while (0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Functional macro to enable the cycle-counting capability of the core Data Watchpoint and Trace unit.</p>
<p>Note that this functionality is optional, so may not be present on your device. This is a no-op in that case.</p>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="core_8h.html#acb8c56bb7c6efaa0e960a7efc3d864f8">BSPACM_CORE_SUPPORTS_CYCCNT</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab52275d819776e77d27303749a51965a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_ENABLE_INTERRUPT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;__enable_irq()</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gratuitous alternative spelling of standard CMSIS core intrinsic. </p>

</div>
</div>
<a class="anchor" id="a1d7c3e78ed005aa264211e43bf2a64c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_INLINE&#160;&#160;&#160;__inline__</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark a function to be inlined.</p>
<p>Most toolchains support this feature, but the spelling of the request varies.</p>
<p>The toolchain is free to ignore the request, which is after all only the developer's expert opinion. When optimizing for size toolchains are likely to ignore this if more than one call site is in the translation unit.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="core_8h.html#a33aec9db511c37252fe188e680170085">BSPACM_CORE_INLINE_FORCED</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a33aec9db511c37252fe188e680170085"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_INLINE_FORCED&#160;&#160;&#160;<a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> __attribute__((__always_inline__))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Insist that a function be inlined.</p>
<p>Use this when <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> is being ignored. Not all toolchains will support this; on those it should be treated as <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a>. </p>

</div>
</div>
<a class="anchor" id="a067cdbba9dbc1fb5b12afea1b3faa27f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_PACKED_STRUCT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">nm_</td><td>)</td>
          <td>&#160;&#160;&#160;struct __attribute__((__packed__)) nm_</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declare a packed structure in a toolchain-specific manner.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nm_</td><td>name of the structure to be declared</td></tr>
  </table>
  </dd>
</dl>
<p>This expands to <code>struct</code> <code>nm_</code> annotated with toolchain-specific directives to ensure the structure contents have no padding. It is used for binary messages that mix types which might normally require padding to maintain MCU-standard alignment. </p>

</div>
</div>
<a class="anchor" id="ac7281bb17c886941c500c4d545511f03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_REENABLE_INTERRUPT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var_</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    if (! (1U &amp; var_)) {                          <a class="code" href="core_8h.html#ab52275d819776e77d27303749a51965a">\</a></div>
<div class="line"><a class="code" href="core_8h.html#ab52275d819776e77d27303749a51965a">      BSPACM_CORE_ENABLE_INTERRUPT</a>();             \</div>
<div class="line">    }                                             \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="core_8h_html_ab52275d819776e77d27303749a51965a"><div class="ttname"><a href="core_8h.html#ab52275d819776e77d27303749a51965a">BSPACM_CORE_ENABLE_INTERRUPT</a></div><div class="ttdeci">#define BSPACM_CORE_ENABLE_INTERRUPT()</div><div class="ttdef"><b>Definition:</b> core.h:136</div></div>
</div><!-- fragment --><p>If interrupts were enabled when <code>var_</code> was declared (generally by <a class="el" href="core_8h.html#a9a756afbc2b8e4b3e0ebf69e42bd3468">BSPACM_CORE_SAVED_INTERRUPT_STATE()</a>), then enable them; otherwise leave them in their current state. </p>

</div>
</div>
<a class="anchor" id="a7774eaf391d7ad86abce29d8f0542aab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_RESTORE_INTERRUPT_STATE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var_</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    if (1U &amp; var_) {                                   <a class="code" href="core_8h.html#aa62b35cf6685650b3c9a7b38699c6c0f">\</a></div>
<div class="line"><a class="code" href="core_8h.html#aa62b35cf6685650b3c9a7b38699c6c0f">      BSPACM_CORE_DISABLE_INTERRUPT</a>();                 \</div>
<div class="line">    } <span class="keywordflow">else</span> {                                           <a class="code" href="core_8h.html#ab52275d819776e77d27303749a51965a">\</a></div>
<div class="line"><a class="code" href="core_8h.html#ab52275d819776e77d27303749a51965a">      BSPACM_CORE_ENABLE_INTERRUPT</a>();                  \</div>
<div class="line">    }                                                  \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="core_8h_html_aa62b35cf6685650b3c9a7b38699c6c0f"><div class="ttname"><a href="core_8h.html#aa62b35cf6685650b3c9a7b38699c6c0f">BSPACM_CORE_DISABLE_INTERRUPT</a></div><div class="ttdeci">#define BSPACM_CORE_DISABLE_INTERRUPT()</div><div class="ttdef"><b>Definition:</b> core.h:132</div></div>
<div class="ttc" id="core_8h_html_ab52275d819776e77d27303749a51965a"><div class="ttname"><a href="core_8h.html#ab52275d819776e77d27303749a51965a">BSPACM_CORE_ENABLE_INTERRUPT</a></div><div class="ttdeci">#define BSPACM_CORE_ENABLE_INTERRUPT()</div><div class="ttdef"><b>Definition:</b> core.h:136</div></div>
</div><!-- fragment --><p>Restore the interrupt enable state to what it was when <code>var_</code> was assigned. This will invoke either <a class="el" href="core_8h.html#ab52275d819776e77d27303749a51965a">BSPACM_CORE_ENABLE_INTERRUPT()</a> or <a class="el" href="core_8h.html#aa62b35cf6685650b3c9a7b38699c6c0f">BSPACM_CORE_DISABLE_INTERRUPT()</a>. You may want <a class="el" href="core_8h.html#ac7281bb17c886941c500c4d545511f03">BSPACM_CORE_REENABLE_INTERRUPT()</a> instead. </p>

</div>
</div>
<a class="anchor" id="a9a756afbc2b8e4b3e0ebf69e42bd3468"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_SAVED_INTERRUPT_STATE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var_</td><td>)</td>
          <td>&#160;&#160;&#160;unsigned int const var_ = __get_PRIMASK()</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declare and initialize a const variable that records whether interrupts are disabled. The value is the PRIMASK register.</p>
<dl class="section note"><dt>Note</dt><dd>This macro expands to a variable definition with an initializer expression, so must be placed in an appropriate context.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var_</td><td>an identifier for a variable that will be defined to hold the value of the PRIMASK register at the point of definition. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a772e089aed4ed7d653db94d9415614f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_SLEEP</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    __WFI();                     \</div>
<div class="line">  } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment --><p>Enter the Cortex-M sleep mode.</p>
<p>The specific effect of this is vendor-specific, but in concept it turns off the processor clock and leaves all other clocks running. The implementation may map to a vendor-specific function or macro, but is expected to be equivalent to invoking the ARM instruction <code>WFI</code> (or <code>WFE</code>) with the <code>SLEEPDEEP</code> bit of System Control Register clear.</p>
<dl class="section warning"><dt>Warning</dt><dd>The implementation of this operation is device-specific.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The user should be aware of the effect of this operation on the hardware an application targets. Interrupts that cause wakeup will, if not masked through <code>PRIMASK</code>, be executed prior to control returning to the point following the <code>__WFI()</code> operation, meaning that any clocks disabled by the operation will not be restored until interrupt processing completes and control returns to the remainder of this macro.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CHDJJHJI.html">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CHDJJHJI.html</a> </dd></dl>

</div>
</div>
<a class="anchor" id="acb8c56bb7c6efaa0e960a7efc3d864f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_CORE_SUPPORTS_CYCCNT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined to true value if cycle-counting is supported on the architecture. This is false on a Cortex-M0+ device. </p>

</div>
</div>
<a class="anchor" id="a334d2789d3560b3630f2c1c633c3998a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_VERSION&#160;&#160;&#160;20150113</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Version identifier for the BSPACM infrastructure</p>
<p>A monotonically non-decreasing integer reflecting the version of BSPACM that is being used. The value represents a development freeze date in the form YYYYMMDD as a decimal number. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7645482c1c93f154e1123e8dab961024"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> unsigned int uiBSPACMcoreBitFromMask </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convert a bit mask to a bit number.</p>
<p>Useful for bitband object references. Some vendors (SiLabs) provide macros for bit positions; some (TI) only provide the mask values.</p>
<dl class="section warning"><dt>Warning</dt><dd>If the passed value does not have exactly one bit set, this function will hang.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mask</td><td>a bit mask. Exactly one bit must be set. In normal use the parameter is a compile-time constant so this function reduces to a compile-time constant too.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the offset of the single set bit in <code>mask</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="adf190c3bf1c993ad3f110e995698fd76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> void vBSPACMcoreSetPinNybble </td>
          <td>(</td>
          <td class="paramtype">volatile uint32_t *&#160;</td>
          <td class="paramname"><em>basep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Function to set the value of a nybble in a word array.</p>
<p>This is the API for things like GPIO pin alternative function selection and interrupt source port selection on the EFM32, and DMA channel source selection on the TM4C.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">regp</td><td>pointer to a consecutive sequence of one or more words that hold packed nybble values. Each word holds eight nybbles.</td></tr>
    <tr><td class="paramname">pin</td><td>the pin number is the ordinal of the nybble to be set.</td></tr>
    <tr><td class="paramname">value</td><td>the nybble value to be stored. Only the four low bits are used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 13 2015 19:58:49 for BSPACM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9
</small></address>
</body>
</html>
