<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9"/>
<title>BSPACM: include/bspacm/utility/onewire.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSPACM
   &#160;<span id="projectnumber">20150113</span>
   </div>
   <div id="projectbrief">Board Support Package for ARM Cortex-M Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_84644856a1893ae35ec50fa71777950a.html">bspacm</a></li><li class="navelem"><a class="el" href="dir_2c71141559d1c2767c2a59a8347e9146.html">utility</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">onewire.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Basic support for 1-Wire(R) communications.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">bspacm/core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="onewire___8h_source.html">bspacm/utility/onewire_.h</a>&gt;</code><br />
</div>
<p><a href="onewire_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSPACMonewireSerialNumber.html">sBSPACMonewireSerialNumber</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aeaf068f8281497202bfb4b8402b936e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#aeaf068f8281497202bfb4b8402b936e6">BSPACM_ONEWIRE_xCel_TO_dCel</a>(xcel_)&#160;&#160;&#160;((10 * (xcel_)) / 16)</td></tr>
<tr class="separator:aeaf068f8281497202bfb4b8402b936e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d432adde30479618a401520716c2e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#ad8d432adde30479618a401520716c2e3">BSPACM_ONEWIRE_xCel_TO_ddegF</a>(xcel_)&#160;&#160;&#160;(320 + ((9 * (xcel_)) / 8))</td></tr>
<tr class="separator:ad8d432adde30479618a401520716c2e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03d7346d3522dd1a85f88842ef412a20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a03d7346d3522dd1a85f88842ef412a20">BSPACM_ONEWIRE_xCel_TO_dK</a>(xcel_)&#160;&#160;&#160;((unsigned int)(21852U + 5U * (xcel_)) / 8U)</td></tr>
<tr class="separator:a03d7346d3522dd1a85f88842ef412a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a202a04aa31767d0196bf500902bc838e"><td class="memItemLeft" align="right" valign="top">typedef const struct <a class="el" href="structsBSPACMonewireBus.html">sBSPACMonewireBus</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a></td></tr>
<tr class="separator:a202a04aa31767d0196bf500902bc838e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ce2b0d00d3ffbc7e13920ac4176e91"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsBSPACMonewireSerialNumber.html">sBSPACMonewireSerialNumber</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a00ce2b0d00d3ffbc7e13920ac4176e91">sBSPACMonewireSerialNumber</a></td></tr>
<tr class="separator:a00ce2b0d00d3ffbc7e13920ac4176e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ab3fd711cd73814894ff1fbea3f0bf38a">BSPACM_ONEWIRE_T_RSTL_us</a> = 480, 
<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a3f99bf61ccef83777e13c44a6352eae0">BSPACM_ONEWIRE_T_RSTH_us</a> = 480, 
<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a847fe4afa2bf4f69bb7bdb048813b7d8">BSPACM_ONEWIRE_T_PDHIGH_us</a> = 60, 
<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7aca6fe1071b759f9585ce1a4c3688c097">BSPACM_ONEWIRE_T_LOW0_us</a> = 60, 
<br />
&#160;&#160;<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ac4c2f6331de24f5c5917dc26a67444ac">BSPACM_ONEWIRE_T_LOW1_us</a> = 1, 
<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7af6f8e5ff2a67313858404e8055b73031">BSPACM_ONEWIRE_T_REC_us</a> = 1, 
<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a94e9a5a524478f9a0ea8ca81789ca64d">BSPACM_ONEWIRE_T_INT_us</a> = 1, 
<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ace0493cf1d7b69a383c96cc3d70d150b">BSPACM_ONEWIRE_T_RDV_us</a> = 15 - BSPACM_ONEWIRE_T_INT_us, 
<br />
&#160;&#160;<a class="el" href="onewire_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a52f5716b769e2e20084c3cd61de0c659">BSPACM_ONEWIRE_T_SLOT_us</a> = 60
<br />
 }</td></tr>
<tr class="separator:adf764cbdea00d65edcd07bb9953ad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fb83031ce9923c84392b4e92f956b5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5a5540e55bfacb751c9efdcecff49a0f71">BSPACM_ONEWIRE_CMD_READ_ROM</a> = 0x33, 
<a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5aa13a81804d5474d4cb3ebfa841e9d7cf">BSPACM_ONEWIRE_CMD_SKIP_ROM</a> = 0xcc, 
<a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5a0892a15d7e8650024382a4bc147e0864">BSPACM_ONEWIRE_CMD_READ_POWER_SUPPLY</a> = 0xb4, 
<a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5a46072d976f1b7f03aeddfe80cd88746c">BSPACM_ONEWIRE_CMD_RECALL_EE</a> = 0xb8, 
<br />
&#160;&#160;<a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5a8d50728dc7d99d4c81a17675ee7100a0">BSPACM_ONEWIRE_CMD_READ_SCRATCHPAD</a> = 0xbe, 
<a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5a7ece6486833dd4c64ddf38ee803bc841">BSPACM_ONEWIRE_CMD_CONVERT_T</a> = 0x44
<br />
 }</td></tr>
<tr class="separator:a99fb83031ce9923c84392b4e92f956b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a75486b5774b042c6534e847a2029dc17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a75486b5774b042c6534e847a2029dc17">iBSPACMonewireReset</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:a75486b5774b042c6534e847a2029dc17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7174061ce3990e0208284c9c538f7aa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a7174061ce3990e0208284c9c538f7aa0">vBSPACMonewireShutdown</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:a7174061ce3990e0208284c9c538f7aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa0c0a529164cb689440ca3246e8d44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a7aa0c0a529164cb689440ca3246e8d44">vBSPACMonewireParasitePower</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus, bool powered)</td></tr>
<tr class="separator:a7aa0c0a529164cb689440ca3246e8d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4407d9e0fb0abaa96a948b2594a84e84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a4407d9e0fb0abaa96a948b2594a84e84">vBSPACMonewireWriteByte</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus, uint8_t byte)</td></tr>
<tr class="separator:a4407d9e0fb0abaa96a948b2594a84e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4eeed8c1f9b7df6bb3bc7624c2e12aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#ac4eeed8c1f9b7df6bb3bc7624c2e12aa">iBSPACMonewireReadBit</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:ac4eeed8c1f9b7df6bb3bc7624c2e12aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31478a356d80c1ee0a7fa60dccde7e34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a31478a356d80c1ee0a7fa60dccde7e34">iBSPACMonewireReadByte</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:a31478a356d80c1ee0a7fa60dccde7e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3610ed30946b7eaefc0959399ca889"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a3c3610ed30946b7eaefc0959399ca889">iBSPACMonewireComputeCRC</a> (const unsigned char *data, int len)</td></tr>
<tr class="separator:a3c3610ed30946b7eaefc0959399ca889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a046dad11f39bef9f072d3b5d44355ce1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a046dad11f39bef9f072d3b5d44355ce1">iBSPACMonewireReadSerialNumber</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus, <a class="el" href="structsBSPACMonewireSerialNumber.html">sBSPACMonewireSerialNumber</a> *snp)</td></tr>
<tr class="separator:a046dad11f39bef9f072d3b5d44355ce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4b545b3f913108407c886e0014c9c67"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#ab4b545b3f913108407c886e0014c9c67">iBSPACMonewireReadPowerSupply</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:ab4b545b3f913108407c886e0014c9c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9171689717dc3c43f64f88224ff19a22"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a9171689717dc3c43f64f88224ff19a22">iBSPACMonewireRequestTemperature</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:a9171689717dc3c43f64f88224ff19a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d9e38b52950a7dfa77f58ce7336fc4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a44d9e38b52950a7dfa77f58ce7336fc4">iBSPACMonewireTemperatureReady</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus)</td></tr>
<tr class="separator:a44d9e38b52950a7dfa77f58ce7336fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2411e5ce947483d2923b8cec2bd37b38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a2411e5ce947483d2923b8cec2bd37b38">iBSPACMonewireReadTemperature</a> (<a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a> bus, int16_t *temp_xCel)</td></tr>
<tr class="separator:a2411e5ce947483d2923b8cec2bd37b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Basic support for 1-Wire(R) communications. </p>
<p>This currently supports enough to use DS18B20 one-wire temperature sensors with a dedicated bus and external or parasitic power. Multiple devices on the bus have not been tested.</p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bspacm">http://github.com/pabigot/bspacm</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2015, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aeaf068f8281497202bfb4b8402b936e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_ONEWIRE_xCel_TO_dCel</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xcel_</td><td>)</td>
          <td>&#160;&#160;&#160;((10 * (xcel_)) / 16)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert temperature from 1/16th Cel to tenths Celcius (dCel)</p>
<p>For those of us who operate in lands under the domain of the Comité Consultatif d'Unités.</p>
<p>9 * t / 8 == (9/5) * 10 * (t / 16) without incidental overflow </p>

</div>
</div>
<a class="anchor" id="ad8d432adde30479618a401520716c2e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_ONEWIRE_xCel_TO_ddegF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xcel_</td><td>)</td>
          <td>&#160;&#160;&#160;(320 + ((9 * (xcel_)) / 8))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert temperature from 1/16th Cel to tenths Fahrenheit (d[degF])</p>
<p>For those of us who live in the US and just can't get used to SI.</p>
<p>9 * t / 8 == (9/5) * 10 * (t / 16) without incidental overflow </p>

</div>
</div>
<a class="anchor" id="a03d7346d3522dd1a85f88842ef412a20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_ONEWIRE_xCel_TO_dK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xcel_</td><td>)</td>
          <td>&#160;&#160;&#160;((unsigned int)(21852U + 5U * (xcel_)) / 8U)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert temperature from 1/16th Cel to tenths Kelvin (dK)</p>
<p>For those of us who follow the way of the <a href="http://unitsofmeasure.org/ucum.html">Unified Code for Units of Measure</a></p>
<p>10 * (273.15 + x / 16) = (16*27315 + 100*x) / 160 = (437040 + 100 * x) / 160 = (21852 + 5 * x) / 8 </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a202a04aa31767d0196bf500902bc838e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const struct <a class="el" href="structsBSPACMonewireBus.html">sBSPACMonewireBus</a>* <a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A generic handle to a bus configuration.</p>
<p>The underlying structure is device-specific, as is the mechanism used to initialize it. Look for a routine named <a class="el" href="onewire___8h.html#a6e2203cea2148d44568127e27297289d">hBSPACMonewireConfigureBus()</a> in your device-specific headers. </p>

</div>
</div>
<a class="anchor" id="a00ce2b0d00d3ffbc7e13920ac4176e91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsBSPACMonewireSerialNumber.html">sBSPACMonewireSerialNumber</a>  <a class="el" href="structsBSPACMonewireSerialNumber.html">sBSPACMonewireSerialNumber</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure holding a 1-wire serial number. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define protocol state times in microseconds. User-level code doesn't need this; device-specific implementation does. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7ab3fd711cd73814894ff1fbea3f0bf38a"></a>BSPACM_ONEWIRE_T_RSTL_us&#160;</td><td class="fielddoc">
<p>Minimum time to hold bus low to ensure reset </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a3f99bf61ccef83777e13c44a6352eae0"></a>BSPACM_ONEWIRE_T_RSTH_us&#160;</td><td class="fielddoc">
<p>Time to wait for presence detection after reset to quiesce </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a847fe4afa2bf4f69bb7bdb048813b7d8"></a>BSPACM_ONEWIRE_T_PDHIGH_us&#160;</td><td class="fielddoc">
<p>Delay before presence pulse is known to be valid (15us..60us) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7aca6fe1071b759f9585ce1a4c3688c097"></a>BSPACM_ONEWIRE_T_LOW0_us&#160;</td><td class="fielddoc">
<p>Minimum time to hold bus low when writing a zero </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7ac4c2f6331de24f5c5917dc26a67444ac"></a>BSPACM_ONEWIRE_T_LOW1_us&#160;</td><td class="fielddoc">
<p>Minimum time to hold bus low when writing a one </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7af6f8e5ff2a67313858404e8055b73031"></a>BSPACM_ONEWIRE_T_REC_us&#160;</td><td class="fielddoc">
<p>Recovery delay between write/read transaction cycles </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a94e9a5a524478f9a0ea8ca81789ca64d"></a>BSPACM_ONEWIRE_T_INT_us&#160;</td><td class="fielddoc">
<p>Time to hold bus low when initiating a read slot </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7ace0493cf1d7b69a383c96cc3d70d150b"></a>BSPACM_ONEWIRE_T_RDV_us&#160;</td><td class="fielddoc">
<p>Point at which read value should be sampled </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a52f5716b769e2e20084c3cd61de0c659"></a>BSPACM_ONEWIRE_T_SLOT_us&#160;</td><td class="fielddoc">
<p>Minimum duration of a read or write slot </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a5540e55bfacb751c9efdcecff49a0f71"></a>BSPACM_ONEWIRE_CMD_READ_ROM&#160;</td><td class="fielddoc">
<p>Read 64-bit ROM code without using search procedure </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5aa13a81804d5474d4cb3ebfa841e9d7cf"></a>BSPACM_ONEWIRE_CMD_SKIP_ROM&#160;</td><td class="fielddoc">
<p>Skip ROM sends the following command to all bus devices </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a0892a15d7e8650024382a4bc147e0864"></a>BSPACM_ONEWIRE_CMD_READ_POWER_SUPPLY&#160;</td><td class="fielddoc">
<p>Determine whether device is parasite-powered or external-powered </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a46072d976f1b7f03aeddfe80cd88746c"></a>BSPACM_ONEWIRE_CMD_RECALL_EE&#160;</td><td class="fielddoc">
<p>Store data from EEPROM into RAM </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a8d50728dc7d99d4c81a17675ee7100a0"></a>BSPACM_ONEWIRE_CMD_READ_SCRATCHPAD&#160;</td><td class="fielddoc">
<p>Read the RAM area. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5a7ece6486833dd4c64ddf38ee803bc841"></a>BSPACM_ONEWIRE_CMD_CONVERT_T&#160;</td><td class="fielddoc">
<p>Initiate a temperature conversion.</p>
<p>Be aware that temperature conversion can take up to 750ms at the default 12-bit resolution.</p>
<p>For an externally (non-parasite) powered sensor, the caller may use #iBSPACMonewireReadBit_ni to determine whether the conversion has completed. Completion is indicated when the device responds with a 1. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3c3610ed30946b7eaefc0959399ca889"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireComputeCRC </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the CRC over the data.</p>
<p>When the last byte of the data is the CRC of the preceding bytes, the return value of this function should be zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>data for which CRC is desired</td></tr>
    <tr><td class="paramname">len</td><td>the number of bytes that contribute to CRC calculation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the calculated CRC value </dd></dl>

</div>
</div>
<a class="anchor" id="ac4eeed8c1f9b7df6bb3bc7624c2e12aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireReadBit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a bit from the 1-wire bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the bit read (0 or 1). </dd></dl>

</div>
</div>
<a class="anchor" id="a31478a356d80c1ee0a7fa60dccde7e34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireReadByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a byte from the 1-wire bus.</p>
<p>Invokes <a class="el" href="onewire_8h.html#ac4eeed8c1f9b7df6bb3bc7624c2e12aa">iBSPACMonewireReadBit()</a> eight times to read the data, least significant bit first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the byte read (0 through 255). </dd></dl>

</div>
</div>
<a class="anchor" id="ab4b545b3f913108407c886e0014c9c67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireReadPowerSupply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine whether device is externally powered or uses parasite power.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the bus is externally powered; 0 if the bus is parasitically powered; a negative value if an error is encountered. </dd></dl>

</div>
</div>
<a class="anchor" id="a046dad11f39bef9f072d3b5d44355ce1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireReadSerialNumber </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsBSPACMonewireSerialNumber.html">sBSPACMonewireSerialNumber</a> *&#160;</td>
          <td class="paramname"><em>snp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the serial number from a 1-wire device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">snp</td><td>Pointer to where the serial number should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the serial number was successfully read; -1 if an error occurred. </dd></dl>

</div>
</div>
<a class="anchor" id="a2411e5ce947483d2923b8cec2bd37b38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireReadTemperature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>temp_xCel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the most recent temperature measurement</p>
<p>The temperature is a signed 16-bit value representing 1/16th degrees Celcius. I.e., a value of 1 is 0.0625 Cel.</p>
<dl class="section note"><dt>Note</dt><dd>The accuracy and precision of the measurement are much more coarse than its resolution.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">temp_xCel</td><td>Pointer to a location into which the temperature will be written. This must not be null.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the read was successful; -1 if an error occurred. If there was an error, the value pointed to by temp_xCel remains unchanged. </dd></dl>

</div>
</div>
<a class="anchor" id="a9171689717dc3c43f64f88224ff19a22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireRequestTemperature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send the command sequence to initiate a temperature measurement</p>
<p>Note that this simply requests that the device start to measure the temperature. The measurement process may take up to 750 msec at the default 12-bit resolution.</p>
<p>If the device is externally powered, <a class="el" href="onewire_8h.html#a44d9e38b52950a7dfa77f58ce7336fc4">iBSPACMonewireTemperatureReady()</a> can be invoked to determine whether the requested measurement has completed. If using parasitic power, the application must use iBSPACMonewireParasitePower() and should wait for at least the maximum sample time before invoking <a class="el" href="onewire_8h.html#a2411e5ce947483d2923b8cec2bd37b38">iBSPACMonewireReadTemperature()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the request was successfully submitted, -1 if an error occured. </dd></dl>

</div>
</div>
<a class="anchor" id="a75486b5774b042c6534e847a2029dc17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMonewireReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the bus and check for device presence.</p>
<p>This executes the 1-wire bus reset protocol, then detects whether a 1-wire device is present. The protocol requires that the bus be held low for a given period, then returns it to pullup input. A device present on the bus will respond by pulling the bus low.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no device was detected, 1 if a device responded to the reset. </dd></dl>

</div>
</div>
<a class="anchor" id="a44d9e38b52950a7dfa77f58ce7336fc4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int iBSPACMonewireTemperatureReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Test whether the device has completed measuring the temperature</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Do not invoke this for parasitically-powered devices. See <a class="el" href="onewire_8h.html#a9171689717dc3c43f64f88224ff19a22">iBSPACMonewireRequestTemperature()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the device is still busy; 1 if the sample is ready. </dd></dl>

</div>
</div>
<a class="anchor" id="a7aa0c0a529164cb689440ca3246e8d44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSPACMonewireParasitePower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>powered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Control parasite power to the device.</p>
<p>If parasitic power is being used (see <a class="el" href="onewire_8h.html#ab4b545b3f913108407c886e0014c9c67">iBSPACMonewireReadPowerSupply()</a>) user code must turn on parasite within 10 us after initiating an operation that requires significant power, hold it for the maximum time required by the operation (750 ms for 12-bit temperature calculation), then turn it off before reading the results of the operation. <a class="el" href="onewire_8h.html#a99fb83031ce9923c84392b4e92f956b5a7ece6486833dd4c64ddf38ee803bc841">BSPACM_ONEWIRE_CMD_CONVERT_T</a> used by <a class="el" href="onewire_8h.html#a9171689717dc3c43f64f88224ff19a22">iBSPACMonewireRequestTemperature()</a> is one such operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">powered</td><td>true to turn on parasite power; false to turn it off. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7174061ce3990e0208284c9c538f7aa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSPACMonewireShutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure the bus pin for low power mode.</p>
<p>This reconfigures the port as output low. Note that this affects the MCU power, not the device power. It does remove power from parasitic devices, but externally powered devices will still draw standby current.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4407d9e0fb0abaa96a948b2594a84e84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSPACMonewireWriteByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="onewire_8h.html#a202a04aa31767d0196bf500902bc838e">hBSPACMonewireBus</a>&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a byte onto the 1-wire bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>device-specific information identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">byte</td><td>The value to be written. The low 8 bits are transmitted LSB-first. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 13 2015 19:58:49 for BSPACM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9
</small></address>
</body>
</html>
