<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>BSPACM: include/bspacm/internal/utility/fifo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSPACM
   &#160;<span id="projectnumber">20140424</span>
   </div>
   <div id="projectbrief">Board Support Package for ARM Cortex-M Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_84644856a1893ae35ec50fa71777950a.html">bspacm</a></li><li class="navelem"><a class="el" href="dir_8a4a78112ccfd7eec50148558e96a96f.html">internal</a></li><li class="navelem"><a class="el" href="dir_45eb0a2642516bd49fb8f5313950617f.html">utility</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fifo.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header for a first-in-first-out supporting datastructure.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">bspacm/core.h</a>&gt;</code><br/>
<code>#include &lt;stddef.h&gt;</code><br/>
</div>
<p><a href="fifo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsFIFO.html">sFIFO</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac0b054d67fce60479c1b95b71c1b24c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#ac0b054d67fce60479c1b95b71c1b24c0">FIFO_DEFINE_ALLOCATION</a>(allocation_, size_)</td></tr>
<tr class="separator:ac0b054d67fce60479c1b95b71c1b24c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4ae108da38caa190f3f4a3f6919d5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#aae4ae108da38caa190f3f4a3f6919d5b">FIFO_FROM_ALLOCATION</a>(allocation_)&#160;&#160;&#160;(&amp;(allocation_).fifo)</td></tr>
<tr class="separator:aae4ae108da38caa190f3f4a3f6919d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5aa192d3b7a536b64073a64a588408d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#ad5aa192d3b7a536b64073a64a588408d">FIFO_ADJUST_OFFSET</a>(fp_, v_)&#160;&#160;&#160;((v_) % (fp_)-&gt;size)</td></tr>
<tr class="separator:ad5aa192d3b7a536b64073a64a588408d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afcbad100897b483f96348f96f3112a5d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsFIFO.html">sFIFO</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#afcbad100897b483f96348f96f3112a5d">sFIFO</a></td></tr>
<tr class="separator:afcbad100897b483f96348f96f3112a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae17298965120bbe67294de80097d502e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#ae17298965120bbe67294de80097d502e">fifo_reset</a> (<a class="el" href="structsFIFO.html">sFIFO</a> *fp)</td></tr>
<tr class="separator:ae17298965120bbe67294de80097d502e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7b6241711fd37302f6a111e26c7518"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#a1a7b6241711fd37302f6a111e26c7518">fifo_length</a> (const <a class="el" href="structsFIFO.html">sFIFO</a> *fp)</td></tr>
<tr class="separator:a1a7b6241711fd37302f6a111e26c7518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8d6f1082b214dbeecea9d7af493b28"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#add8d6f1082b214dbeecea9d7af493b28">fifo_empty</a> (const <a class="el" href="structsFIFO.html">sFIFO</a> *fp)</td></tr>
<tr class="separator:add8d6f1082b214dbeecea9d7af493b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23af0e1ea95b503003f574932eb2ac71"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#a23af0e1ea95b503003f574932eb2ac71">fifo_full</a> (const <a class="el" href="structsFIFO.html">sFIFO</a> *fp)</td></tr>
<tr class="separator:a23af0e1ea95b503003f574932eb2ac71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d249e99d054a22862d14017f35b786"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#a20d249e99d054a22862d14017f35b786">fifo_pop_tail</a> (<a class="el" href="structsFIFO.html">sFIFO</a> *fp, int force_if_empty)</td></tr>
<tr class="separator:a20d249e99d054a22862d14017f35b786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680f08e825bd52bf39572bc8609775af"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#a680f08e825bd52bf39572bc8609775af">fifo_push_head</a> (<a class="el" href="structsFIFO.html">sFIFO</a> *fp, uint8_t v)</td></tr>
<tr class="separator:a680f08e825bd52bf39572bc8609775af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08874dcb08ebf9feb18024e13c84673f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fifo_8h.html#a08874dcb08ebf9feb18024e13c84673f">fifo_pop_into_buffer</a> (<a class="el" href="structsFIFO.html">sFIFO</a> *fp, uint8_t *bps, uint8_t *bpe)</td></tr>
<tr class="separator:a08874dcb08ebf9feb18024e13c84673f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header for a first-in-first-out supporting datastructure. </p>
<dl class="section warning"><dt>Warning</dt><dd>This header is intended to be included in implementation files only. The types, macros, and functions described are not namespace-clean.</dd>
<dd>
All <code>fifo_*</code> operations are assumed to operate in mutex context: i.e. no other system (thread, interrupt handler, etc) may be interacting with the FIFO. See <a class="el" href="structsFIFO.html">sFIFO</a> for details.</dd></dl>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bspacm">http://github.com/pabigot/bspacm</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad5aa192d3b7a536b64073a64a588408d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIFO_ADJUST_OFFSET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fp_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((v_) % (fp_)-&gt;size)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform the adjustments necessary to convert a head/tail offset back into the domain of the FIFO cell buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp_</td><td>a pointer to an <a class="el" href="structsFIFO.html">sFIFO</a> instance</td></tr>
    <tr><td class="paramname">v_</td><td>a <code>uint16_t</code> value that may have been incremented past the size of <code>fp_'s</code> cell buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the offset of the cell that is identified by <code>v_</code> modulo the size of <code>fp_'s</code> cell buffer</dd></dl>
<p>(Oddly, making this an inline function increases code size; hence it is a macro.) </p>

</div>
</div>
<a class="anchor" id="ac0b054d67fce60479c1b95b71c1b24c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIFO_DEFINE_ALLOCATION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">allocation_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">union </span>{                                                        <a class="code" href="fifo_8h.html#afcbad100897b483f96348f96f3112a5d">\</a></div>
<div class="line"><a class="code" href="fifo_8h.html#afcbad100897b483f96348f96f3112a5d">    sFIFO</a> fifo;                                                         \</div>
<div class="line">    uint8_t allocation[(size_) + <span class="keyword">sizeof</span>(<a class="code" href="structsFIFO.html">sFIFO</a>)];                        \</div>
<div class="line">  } allocation_ = { { 0, 0, <span class="keyword">sizeof</span>(allocation_) - offsetof(<a class="code" href="structsFIFO.html">sFIFO</a>, cell) } }</div>
<div class="ttc" id="fifo_8h_html_afcbad100897b483f96348f96f3112a5d"><div class="ttname"><a href="fifo_8h.html#afcbad100897b483f96348f96f3112a5d">sFIFO</a></div><div class="ttdeci">struct sFIFO sFIFO</div></div>
<div class="ttc" id="structsFIFO_html"><div class="ttname"><a href="structsFIFO.html">sFIFO</a></div><div class="ttdef"><b>Definition:</b> fifo.h:101</div></div>
</div><!-- fragment --><p>Define a <a class="el" href="structsFIFO.html">sFIFO</a> instance that supports at least <code>size_</code> value cells.</p>
<dl class="section warning"><dt>Warning</dt><dd>The definition has <code>static</code> storage class. A reference to the fifo instance must be shared with the infrastructure that uses it.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="fifo_8h.html#aae4ae108da38caa190f3f4a3f6919d5b">FIFO_FROM_ALLOCATION()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocation_</td><td>the name of the allocation instance</td></tr>
    <tr><td class="paramname">size_</td><td>the desired number of cells. The actual number of cells may be slightly larger due to alignment padding. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aae4ae108da38caa190f3f4a3f6919d5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIFO_FROM_ALLOCATION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">allocation_</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;(allocation_).fifo)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtain a pointer to the <a class="el" href="structsFIFO.html">sFIFO</a> instance stored within <code>allocation_</code>, which must have been defined using <a class="el" href="fifo_8h.html#ac0b054d67fce60479c1b95b71c1b24c0">FIFO_DEFINE_ALLOCATION()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocation_</td><td>the name of the allocation instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the <a class="el" href="structsFIFO.html">sFIFO</a> instance within the allocation </dd></dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="afcbad100897b483f96348f96f3112a5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsFIFO.html">sFIFO</a>  <a class="el" href="structsFIFO.html">sFIFO</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data structure for a first-in-first-out circular buffer of arbitrary size, holding octet (<code>uint8_t</code>) values.</p>
<p>This struct uses the flexible array capability standardized in C99, along with the <a class="el" href="fifo_8h.html#ac0b054d67fce60479c1b95b71c1b24c0">FIFO_DEFINE_ALLOCATION()</a> and <a class="el" href="fifo_8h.html#aae4ae108da38caa190f3f4a3f6919d5b">FIFO_FROM_ALLOCATION()</a> macros, to avoid dynamic memory allocation while still allowing variation in size between instances of the data type.</p>
<p>Invariants and policies:</p>
<ul>
<li><code>head</code> is equal to <code>tail</code> only when the FIFO is empty. </li>
<li><code>head+1</code> is equal to <code>tail</code> modulo <code>size</code> when the FIFO is full. </li>
<li>Values are added at the head, which then moves to the next cell. </li>
<li>Values are removed from the tail, which then moves to the next cell. </li>
<li>Newly-received values are retained in preference to older values when the buffer overflows.</li>
</ul>
<p>This data structure is intended to be shared between interrupt handlers and framework code. It probably should not be accessed directly by user code. The following operations are provided to help maintain the invariants above:</p>
<ul>
<li><a class="el" href="fifo_8h.html#ae17298965120bbe67294de80097d502e">fifo_reset</a> </li>
<li><a class="el" href="fifo_8h.html#a1a7b6241711fd37302f6a111e26c7518">fifo_length</a> </li>
<li><a class="el" href="fifo_8h.html#add8d6f1082b214dbeecea9d7af493b28">fifo_empty</a> </li>
<li><a class="el" href="fifo_8h.html#a23af0e1ea95b503003f574932eb2ac71">fifo_full</a> </li>
<li><a class="el" href="fifo_8h.html#a20d249e99d054a22862d14017f35b786">fifo_pop_tail</a> </li>
<li><a class="el" href="fifo_8h.html#a680f08e825bd52bf39572bc8609775af">fifo_push_head</a> </li>
<li><a class="el" href="fifo_8h.html#a08874dcb08ebf9feb18024e13c84673f">fifo_pop_into_buffer</a></li>
</ul>
<p>Although these inline functions perform common operations, for full efficiency it is sometimes necessary to manipulate the <code>head</code> and <code>tail</code> fields directly. The fields that are expected to be read and written by both interrupt handlers and framework code are marked volatile to ensure they are not cached inappropriately. Nonetheless, all changes to the volatile fields of this structure must be done in a context that inhibits external modifications. As an optimization, framework code executed with interrupts off may use local cached variables holding <code>head</code> or <code>tail</code> while performing operations that involve multiple cells of the buffer, so long as the final values are written back to the structure before interrupts are re-enabled. Be sure to satisfy the data structure invariants when writing such code. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="add8d6f1082b214dbeecea9d7af493b28"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int fifo_empty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return a true value iff <code>fp</code> has no buffered values. </p>

</div>
</div>
<a class="anchor" id="a23af0e1ea95b503003f574932eb2ac71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int fifo_full </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return a true value iff <code>fp</code> has no room for additional buffered values. </p>

</div>
</div>
<a class="anchor" id="a1a7b6241711fd37302f6a111e26c7518"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> uint16_t fifo_length </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of cells actively used by the FIFO.</p>
<p>This ranges from zero to <code>fp-&gt;size - 1</code>. </p>

</div>
</div>
<a class="anchor" id="a08874dcb08ebf9feb18024e13c84673f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int fifo_pop_into_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bpe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy multiple elements from the FIFO into a buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>pointer the FIFO pointer</td></tr>
    <tr><td class="paramname">bps</td><td>a pointer to the first location into which FIFO contents should be stored</td></tr>
    <tr><td class="paramname">bpe</td><td>a pointer to the end location, immediately following the last location where a FIFO value may be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of elements stored starting at <code>bps</code>. The smaller of <code>bpe-bps</code> and the length of the FIFO will be copied out. </dd></dl>

</div>
</div>
<a class="anchor" id="a20d249e99d054a22862d14017f35b786"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int fifo_pop_tail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force_if_empty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the oldest value within the FIFO, or a negative error code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>pointer to the FIFO structure</td></tr>
    <tr><td class="paramname">force_if_empty</td><td>If this is a true value, the tail of the FIFO will be adjusted to consume its last value, whether or not there appears to be such a value. This allows a new value to be stored into the array prior to checking whether there is space for it, and causes the oldest unread value to be forgotten. When false, the tail will not be incremented if it appears there no values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a non-negative value from the buffer, or a negative value indicating that the FIFO was empty. </dd></dl>

</div>
</div>
<a class="anchor" id="a680f08e825bd52bf39572bc8609775af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> int fifo_push_head </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Push <code>v</code> onto FIFO <code>fp</code>.</p>
<p>The return value indicates the previous state of the FIFO, allowing interrupt configuration to follow the empty/non-empty/full state of the FIFO. In all cases <code>v</code> will be saved; in some cases an earlier value in the FIFO will be lost.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>the FIFO pointer</td></tr>
    <tr><td class="paramname">v</td><td>the value to be added</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A negative value if the fifo was full (this will save the new value, but discard the oldest unread value); zero if the value was saved to a fifo that already had values in it; a positive value if the value was saved to a previously-empty FIFO. </dd></dl>

</div>
</div>
<a class="anchor" id="ae17298965120bbe67294de80097d502e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#a1d7c3e78ed005aa264211e43bf2a64c5">BSPACM_CORE_INLINE</a> void fifo_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsFIFO.html">sFIFO</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reset the FIFO back to an empty state. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 24 2014 10:01:18 for BSPACM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
