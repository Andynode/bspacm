<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9"/>
<title>BSPACM: device/nrf51/include/bspacm/utility/uptime.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSPACM
   &#160;<span id="projectnumber">20150113</span>
   </div>
   <div id="projectbrief">Board Support Package for ARM Cortex-M Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_820b2b9dd608784780e51ab49715a98b.html">device</a></li><li class="navelem"><a class="el" href="dir_53ad03249578fe166fe0e33a46fa9d73.html">nrf51</a></li><li class="navelem"><a class="el" href="dir_842718a9f0fb96e4b230f64a41a7eb54.html">include</a></li><li class="navelem"><a class="el" href="dir_9bb58392c453a8629cd18061c955097d.html">bspacm</a></li><li class="navelem"><a class="el" href="dir_f36aa8547eb9cef6d4a1ad5bf3ef60ff.html">utility</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">uptime.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>nRF51-specific support for low-resolution uptime clock  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">bspacm/core.h</a>&gt;</code><br />
</div>
<p><a href="uptime_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSPACMuptimeState.html">sBSPACMuptimeState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2f52ed33949852e6c336e4fed5158e23"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a2f52ed33949852e6c336e4fed5158e23">BSPACM_UPTIME_RTC_BASE</a>&#160;&#160;&#160;NRF_RTC1_BASE</td></tr>
<tr class="separator:a2f52ed33949852e6c336e4fed5158e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e9a55b6d7051dbea5403be76fc2442"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a55e9a55b6d7051dbea5403be76fc2442">BSPACM_UPTIME_RTC</a>&#160;&#160;&#160;NRF_RTC0</td></tr>
<tr class="separator:a55e9a55b6d7051dbea5403be76fc2442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a021110148f96c8a49fce199dc2c08657"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a021110148f96c8a49fce199dc2c08657">BSPACM_UPTIME_CC_COUNT</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a021110148f96c8a49fce199dc2c08657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13971c955835aef75ede91e1a6796b01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a13971c955835aef75ede91e1a6796b01">BSPACM_UPTIME_Hz</a>&#160;&#160;&#160;32768U</td></tr>
<tr class="separator:a13971c955835aef75ede91e1a6796b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c25b8f68c2701b4b271760be9b03d5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a4c25b8f68c2701b4b271760be9b03d5d">BSPACM_UPTIME_SLEEP_MINIMUM</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a4c25b8f68c2701b4b271760be9b03d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7814637ea4b9f43fe4fde8a63ce2fe9e"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a7814637ea4b9f43fe4fde8a63ce2fe9e">vBSPACMuptimeAlarmCallback_flih</a>) (int ccidx, struct <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a> *ap)</td></tr>
<tr class="separator:a7814637ea4b9f43fe4fde8a63ce2fe9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad314c10882f9c86707efcfb18150adfb"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#ad314c10882f9c86707efcfb18150adfb">sBSPACMuptimeAlarm</a></td></tr>
<tr class="separator:ad314c10882f9c86707efcfb18150adfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79fdcf07a30b84aaaca74e8666566017"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a79fdcf07a30b84aaaca74e8666566017">hBSPACMuptimeAlarm</a></td></tr>
<tr class="separator:a79fdcf07a30b84aaaca74e8666566017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa33543fe676287394634a19b5be58a5d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsBSPACMuptimeState.html">sBSPACMuptimeState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#aa33543fe676287394634a19b5be58a5d">sBSPACMuptimeState</a></td></tr>
<tr class="separator:aa33543fe676287394634a19b5be58a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7b951a8e5a940eec299e5caed2614331"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a7b951a8e5a940eec299e5caed2614331">uiBSPACMuptimeConvert_us_utt</a> (unsigned int dur_us)</td></tr>
<tr class="separator:a7b951a8e5a940eec299e5caed2614331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3d3dad81367a704c3bb40389d60317"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a1a3d3dad81367a704c3bb40389d60317">uiBSPACMuptimeConvert_ms_utt</a> (unsigned int dur_ms)</td></tr>
<tr class="separator:a1a3d3dad81367a704c3bb40389d60317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69ef7749365e7d0fee02dc577d17f7b0"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a69ef7749365e7d0fee02dc577d17f7b0">uiBSPACMuptimeConvert_utt_us</a> (unsigned int dur_utt)</td></tr>
<tr class="separator:a69ef7749365e7d0fee02dc577d17f7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cdc70c359fe7422653c28f86bc5f03e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a4cdc70c359fe7422653c28f86bc5f03e">uiBSPACMuptimeConvert_utt_ms</a> (unsigned int dur_utt)</td></tr>
<tr class="separator:a4cdc70c359fe7422653c28f86bc5f03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc145d4c4f8ba5ea81ab126b559c8fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a5bc145d4c4f8ba5ea81ab126b559c8fd">iBSPACMuptimeAlarmSet</a> (int ccidx, unsigned int when_utt, <a class="el" href="uptime_8h.html#a79fdcf07a30b84aaaca74e8666566017">hBSPACMuptimeAlarm</a> ap)</td></tr>
<tr class="separator:a5bc145d4c4f8ba5ea81ab126b559c8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3cfa2f0cea11b6ce0d104156b603b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uptime_8h.html#a79fdcf07a30b84aaaca74e8666566017">hBSPACMuptimeAlarm</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#aac3cfa2f0cea11b6ce0d104156b603b1">hBSPACMuptimeAlarmClear</a> (int ccidx, bool *pendingp)</td></tr>
<tr class="separator:aac3cfa2f0cea11b6ce0d104156b603b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52924abea5260d2d59e64f947e5a6c1b"><td class="memItemLeft" align="right" valign="top">unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a52924abea5260d2d59e64f947e5a6c1b">ullBSPACMuptime</a> ()</td></tr>
<tr class="separator:a52924abea5260d2d59e64f947e5a6c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09606d4ebe84cc3ed621a1d726e23be"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#ad09606d4ebe84cc3ed621a1d726e23be">uiBSPACMuptime</a> ()</td></tr>
<tr class="separator:ad09606d4ebe84cc3ed621a1d726e23be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e60822aa75785c74c0d8b2ac87b011f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a8e60822aa75785c74c0d8b2ac87b011f">vBSPACMuptimeStart</a> ()</td></tr>
<tr class="separator:a8e60822aa75785c74c0d8b2ac87b011f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a084a2c0b71501be9dc074de478955038"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a084a2c0b71501be9dc074de478955038">bBSPACMuptimeEnabled</a> ()</td></tr>
<tr class="separator:a084a2c0b71501be9dc074de478955038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a311a3e8753fe44f92ab1e87ebf6db0c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a311a3e8753fe44f92ab1e87ebf6db0c8">vBSPACMuptimeSleepCancel</a> (void)</td></tr>
<tr class="separator:a311a3e8753fe44f92ab1e87ebf6db0c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f561b2ff9ebe0a75cd43f18ddf46c53"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a1f561b2ff9ebe0a75cd43f18ddf46c53">bBSPACMuptimeSleep</a> (unsigned int duration_utt)</td></tr>
<tr class="separator:a1f561b2ff9ebe0a75cd43f18ddf46c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>nRF51-specific support for low-resolution uptime clock </p>
<p>RTC peripheral <a class="el" href="uptime_8h.html#a55e9a55b6d7051dbea5403be76fc2442">BSPACM_UPTIME_RTC</a> is reserved for use by BSPACM to support long-duration sleeps and user-defined alarms.</p>
<p>Capture/compare register 0 is reserved for timed sleeps via iBSPACMuptimeSleep().</p>
<p>Other capture/compare registers may be used for user alarms via <a class="el" href="uptime_8h.html#a5bc145d4c4f8ba5ea81ab126b559c8fd">iBSPACMuptimeAlarmSet()</a>.</p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bspacm">http://github.com/pabigot/bspacm</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2015, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a021110148f96c8a49fce199dc2c08657"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_UPTIME_CC_COUNT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of capture/compare registers available on the selected RTC peripheral.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#a2f52ed33949852e6c336e4fed5158e23">BSPACM_UPTIME_RTC_BASE</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a13971c955835aef75ede91e1a6796b01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_UPTIME_Hz&#160;&#160;&#160;32768U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The frequency of the BSPACM_UPTIME_RTC peripheral in Hz. </p>

</div>
</div>
<a class="anchor" id="a55e9a55b6d7051dbea5403be76fc2442"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_UPTIME_RTC&#160;&#160;&#160;NRF_RTC0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>One of the NRF RTC peripherals reserved for use by BSPACM infrastructure.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#a2f52ed33949852e6c336e4fed5158e23">BSPACM_UPTIME_RTC_BASE</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a2f52ed33949852e6c336e4fed5158e23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_UPTIME_RTC_BASE&#160;&#160;&#160;NRF_RTC1_BASE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The integral address of the RTC peripheral to be used for BSPACM uptime clock.</p>
<p>You probably don't want this to be NRF_RTC0_BASE, because that's used by soft devices. </p>

</div>
</div>
<a class="anchor" id="a4c25b8f68c2701b4b271760be9b03d5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_UPTIME_SLEEP_MINIMUM&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The minimum duration in uptime ticks that will cause <a class="el" href="uptime_8h.html#a1f561b2ff9ebe0a75cd43f18ddf46c53">bBSPACMuptimeSleep()</a> to actually sleep. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a79fdcf07a30b84aaaca74e8666566017"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a>* <a class="el" href="uptime_8h.html#a79fdcf07a30b84aaaca74e8666566017">hBSPACMuptimeAlarm</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A handle to an uptime alarm structure </p>

</div>
</div>
<a class="anchor" id="ad314c10882f9c86707efcfb18150adfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a>  <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>State for an alarm driven by the uptime clock. </p>

</div>
</div>
<a class="anchor" id="aa33543fe676287394634a19b5be58a5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsBSPACMuptimeState.html">sBSPACMuptimeState</a>  <a class="el" href="structsBSPACMuptimeState.html">sBSPACMuptimeState</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current state of the uptime clock.</p>
<p>This is global to allow access to pieces of it from inline functions. User application should never inspect nor mutate any of these fields. </p>

</div>
</div>
<a class="anchor" id="a7814637ea4b9f43fe4fde8a63ce2fe9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*  vBSPACMuptimeAlarmCallback_flih) (int ccidx, struct <a class="el" href="structsBSPACMuptimeAlarm.html">sBSPACMuptimeAlarm</a> *ap)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type for an alarm callback function.</p>
<p>It is explicitly permitted to invoke <a class="el" href="uptime_8h.html#a5bc145d4c4f8ba5ea81ab126b559c8fd">iBSPACMuptimeAlarmSet()</a> and iBSPACMuptimeAlarmCancel() from within the callback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ap</td><td>pointer to the alarm structure. This may be embedded in a larger structure to pass context to the callback.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The callback is invoked from the first level interrupt handler and is subject to all the usual caveats about what should be done in that context.</dd>
<dd>
If the registered alarm is scheduled for repeated invocation, the corresponding compare register will have been updated to the next alarm time prior to invoking the callback. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a084a2c0b71501be9dc074de478955038"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool bBSPACMuptimeEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return <code>true</code> if and only if the uptime clock has been started and is still running. </p>

</div>
</div>
<a class="anchor" id="a1f561b2ff9ebe0a75cd43f18ddf46c53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bBSPACMuptimeSleep </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration_utt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to sleep for a given duration.</p>
<p>This allows sleeps up to 512 s (24 bits of a 32 KiHz timer), much longer than <a class="el" href="hires_8h.html#a5a5866a5181b9ef761389810926ed6b4">vBSPACMhiresSleep_us()</a>.</p>
<dl class="section warning"><dt>Warning</dt><dd>If this function is invoked while <a class="el" href="uptime_8h.html#a084a2c0b71501be9dc074de478955038">bBSPACMuptimeEnabled()</a> returns false, it will hang. This is a bigger clue that your program is incorrect than any other reasonable behavior.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration_utt</td><td>duration of the sleep, in <a class="el" href="uptime_8h.html#a13971c955835aef75ede91e1a6796b01">BSPACM_UPTIME_Hz</a> ticks. Values are taken modulo 2^24. Values less than <a class="el" href="uptime_8h.html#a4c25b8f68c2701b4b271760be9b03d5d">BSPACM_UPTIME_SLEEP_MINIMUM</a> cause immediate return <code>true</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the sleep ran to completion or was shorter than <a class="el" href="uptime_8h.html#a4c25b8f68c2701b4b271760be9b03d5d">BSPACM_UPTIME_SLEEP_MINIMUM</a>; <code>false</code> if <a class="el" href="uptime_8h.html#a311a3e8753fe44f92ab1e87ebf6db0c8">vBSPACMuptimeSleepCancel()</a> was invoked during an interrupt handler to force an early wakeup. </dd></dl>

</div>
</div>
<a class="anchor" id="aac3cfa2f0cea11b6ce0d104156b603b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uptime_8h.html#a79fdcf07a30b84aaaca74e8666566017">hBSPACMuptimeAlarm</a> hBSPACMuptimeAlarmClear </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ccidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>pendingp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove an alarm from the uptime clock</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ccidx</td><td>the capture/compare register from which the alarm should be removed. If this register is not valid for the RTC peripheral an error is returned.</td></tr>
    <tr><td class="paramname">pendingp</td><td>optional pointer to a record of whether the alarm was pending when it was removed. Pass a null pointer if this information is not relevant.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the handle for the alarm that was removed, or a null pointer if no alarm was present or the ccidx was invalid. </dd></dl>

</div>
</div>
<a class="anchor" id="a5bc145d4c4f8ba5ea81ab126b559c8fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMuptimeAlarmSet </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ccidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>when_utt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uptime_8h.html#a79fdcf07a30b84aaaca74e8666566017">hBSPACMuptimeAlarm</a>&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Schedule an alarm on the uptime clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ccidx</td><td>the capture/compare register to use for the alarm. If the passed value is not valid for the RTC peripheral being used as <a class="el" href="uptime_8h.html#a55e9a55b6d7051dbea5403be76fc2442">BSPACM_UPTIME_RTC</a>, or if there is already an alarm attached to the register, the call returns an error. Note that ccidx 0 is reserved.</td></tr>
    <tr><td class="paramname">when_utt</td><td>the absolute time at which the alarm should go off. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Alarm times are limited by the 24-bit resolution of the RTC.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ap</td><td>a pointer to the alarm structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successfully scheduled, or a negative error code. Attempting to schedule an alarm on an unstarted/disabled clock is an error. </dd></dl>

</div>
</div>
<a class="anchor" id="ad09606d4ebe84cc3ed621a1d726e23be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uiBSPACMuptime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the current uptime truncated to the lowest 32 bits </p>

</div>
</div>
<a class="anchor" id="a1a3d3dad81367a704c3bb40389d60317"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uiBSPACMuptimeConvert_ms_utt </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dur_ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convert a time from milliseconds to uptime ticks, rounding up. </p>

</div>
</div>
<a class="anchor" id="a7b951a8e5a940eec299e5caed2614331"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uiBSPACMuptimeConvert_us_utt </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dur_us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convert a time from microseconds to uptime ticks, rounding up. </p>

</div>
</div>
<a class="anchor" id="a4cdc70c359fe7422653c28f86bc5f03e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uiBSPACMuptimeConvert_utt_ms </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dur_utt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convert a time from uptime ticks to milliseconds, rounding up. </p>

</div>
</div>
<a class="anchor" id="a69ef7749365e7d0fee02dc577d17f7b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uiBSPACMuptimeConvert_utt_us </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dur_utt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convert a time from uptime ticks to microseconds, rounding up. </p>

</div>
</div>
<a class="anchor" id="a52924abea5260d2d59e64f947e5a6c1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long ullBSPACMuptime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the absolute uptime in its highest available precision </p>

</div>
</div>
<a class="anchor" id="a311a3e8753fe44f92ab1e87ebf6db0c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSPACMuptimeSleepCancel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to cancel any in-progress <a class="el" href="uptime_8h.html#a1f561b2ff9ebe0a75cd43f18ddf46c53">bBSPACMuptimeSleep()</a>.</p>
<p>This may be called from interrupt handlers to force an early wakeup when a situation requires the application to react early. </p>

</div>
</div>
<a class="anchor" id="a8e60822aa75785c74c0d8b2ac87b011f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSPACMuptimeStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure and enable the uptime clock. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 13 2015 19:58:49 for BSPACM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9
</small></address>
</body>
</html>
