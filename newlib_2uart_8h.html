<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>BSPACM: include/bspacm/newlib/uart.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSPACM
   &#160;<span id="projectnumber">20140523</span>
   </div>
   <div id="projectbrief">Board Support Package for ARM Cortex-M Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_84644856a1893ae35ec50fa71777950a.html">bspacm</a></li><li class="navelem"><a class="el" href="dir_89d2d557f68edf78b71b713571314e49.html">newlib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">uart.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>File-descriptor capabilities associated with UART/CONSOLE peripherals.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">bspacm/core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="fdops_8h_source.html">bspacm/newlib/fdops.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="periph_2uart_8h_source.html">bspacm/periph/uart.h</a>&gt;</code><br />
</div>
<p><a href="newlib_2uart_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a98540e1e1c7651625a355e40d4117237"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fdops_8h.html#a3f47a4bad11923847eaf18193bb4a5e5">hBSPACMnewlibFDOPSfile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="newlib_2uart_8h.html#a98540e1e1c7651625a355e40d4117237">hBSPACMnewlibFDOPSdriverUARTbind</a> (<a class="el" href="periph_2uart_8h.html#a2f1510eed2326251b0092eb7e0ca6ee5">hBSPACMperiphUART</a> usp)</td></tr>
<tr class="separator:a98540e1e1c7651625a355e40d4117237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bbae5fb156a23dc09cc9639426b94a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsBSPACMnewlibFDOPSfile.html">sBSPACMnewlibFDOPSfile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="newlib_2uart_8h.html#a7bbae5fb156a23dc09cc9639426b94a0">fBSPACMnewlibFDOPSdriverCONSOLE</a> (const char *pathname, int flags)</td></tr>
<tr class="separator:a7bbae5fb156a23dc09cc9639426b94a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6baa150a33ff62857fa6ba0722e5bff5"><td class="memItemLeft" align="right" valign="top">const <br class="typebreak" />
<a class="el" href="structsBSPACMperiphUARTconfiguration.html">sBSPACMperiphUARTconfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="newlib_2uart_8h.html#a6baa150a33ff62857fa6ba0722e5bff5">xBSPACMnewlibFDOPSconsoleConfiguration</a></td></tr>
<tr class="separator:a6baa150a33ff62857fa6ba0722e5bff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File-descriptor capabilities associated with UART/CONSOLE peripherals. </p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bspacm">http://github.com/pabigot/bspacm</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7bbae5fb156a23dc09cc9639426b94a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsBSPACMnewlibFDOPSfile.html">sBSPACMnewlibFDOPSfile</a>* fBSPACMnewlibFDOPSdriverCONSOLE </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A driver function to support <code>/dev/console</code> as a UART.</p>
<p>The UART will be configured at a peripheral-specific speed. This should be 115200 8N1 for most UARTs, but if a low-speed peripheral is selected it may be 9600 8N1.</p>
<p>This should be placed into <a class="el" href="fdops_8h.html#a933f0ef974895bea2ace09798afda59c">xBSPACMnewlibFDOPSdriver</a> if the BSPACM board default UART is to be recognized as the console device for stdin/stdout/stderr.</p>
<p>Because there is only one console device, but it may need to be referenced by multiple descriptors, the returned structure is reference counted. The associated UART is deconfigured and the structure released only when no descriptors still reference it.</p>
<p>If the console device was already bound to a non-console descriptor through <a class="el" href="newlib_2uart_8h.html#a98540e1e1c7651625a355e40d4117237">hBSPACMnewlibFDOPSdriverUARTbind()</a>, the call will fail with <code>errno</code> set to <code>EBUSY</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pathname</td><td>the path that was passed to open(). This function returns a null pointer if <code>pathname</code> is not equal to <code>"/dev/console"</code>.</td></tr>
    <tr><td class="paramname">flags</td><td>ignored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the singleton instance of the console descriptor state. </dd></dl>

</div>
</div>
<a class="anchor" id="a98540e1e1c7651625a355e40d4117237"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fdops_8h.html#a3f47a4bad11923847eaf18193bb4a5e5">hBSPACMnewlibFDOPSfile</a> hBSPACMnewlibFDOPSdriverUARTbind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="periph_2uart_8h.html#a2f1510eed2326251b0092eb7e0ca6ee5">hBSPACMperiphUART</a>&#160;</td>
          <td class="paramname"><em>usp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Utility function to bind a UART peripheral to file descriptor state.</p>
<p>This function allocates a file descriptor state object, assigns <code>usp</code> into its <a class="el" href="structsBSPACMnewlibFDOPSfile.html#aefceb5f7e7dcebb56ea0d61de4f682ba">dev</a> field, and assigning the standard UART operations table.</p>
<dl class="section note"><dt>Note</dt><dd>If <code>usp</code> refers to the default console device, and that device is already open, the call will fail with <code>errno</code> set to EBUSY. Similarly, successfully binding the default console device through this API will prevent <a class="el" href="newlib_2uart_8h.html#a7bbae5fb156a23dc09cc9639426b94a0">fBSPACMnewlibFDOPSdriverCONSOLE()</a> from succeeding.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usp</td><td>a pointer to a UART peripheral. The peripheral is <b>not</b> configured by this function. (The peripheral is deconfigured by the implementation of close() in the operations table assigned by this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly allocated file descriptor state object, or null if something went wrong. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6baa150a33ff62857fa6ba0722e5bff5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsBSPACMperiphUARTconfiguration.html">sBSPACMperiphUARTconfiguration</a> xBSPACMnewlibFDOPSconsoleConfiguration</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The configuration that will be used by the console driver.</p>
<dl class="section user"><dt>Weakly Defined</dt><dd>A weak definition of this that uses a device-specific default baud rate is provided in the newlib_fdops library, but may be overridden by an application that requires another configuration, e.g. when the clock rate will be reduced below the speed required to support the UART-specific default. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 23 2014 05:42:35 for BSPACM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
