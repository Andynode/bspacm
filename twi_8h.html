<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9"/>
<title>BSPACM: device/nrf51/include/bspacm/periph/twi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSPACM
   &#160;<span id="projectnumber">20150113</span>
   </div>
   <div id="projectbrief">Board Support Package for ARM Cortex-M Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_820b2b9dd608784780e51ab49715a98b.html">device</a></li><li class="navelem"><a class="el" href="dir_53ad03249578fe166fe0e33a46fa9d73.html">nrf51</a></li><li class="navelem"><a class="el" href="dir_842718a9f0fb96e4b230f64a41a7eb54.html">include</a></li><li class="navelem"><a class="el" href="dir_9bb58392c453a8629cd18061c955097d.html">bspacm</a></li><li class="navelem"><a class="el" href="dir_1fbf00acc82156755638528d0755a634.html">periph</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">twi.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>nRF51-specific support for I2C  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">bspacm/core.h</a>&gt;</code><br />
</div>
<p><a href="twi_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSPACMi2cBus.html">sBSPACMi2cBus</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adeb833fae78932c5428155f79a655f33"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#adeb833fae78932c5428155f79a655f33">BSPACM_NRF_TWI_BUS_ERROR_TIMEOUT</a>&#160;&#160;&#160;0x100</td></tr>
<tr class="separator:adeb833fae78932c5428155f79a655f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4acd238e75e7541287cdf8174336479"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#af4acd238e75e7541287cdf8174336479">BSPACM_NRF_TWI_BUS_ERROR_CLEAR_FAILED</a>&#160;&#160;&#160;0x200</td></tr>
<tr class="separator:af4acd238e75e7541287cdf8174336479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b20ef7c77d783469c3f80fe2267ae3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#a95b20ef7c77d783469c3f80fe2267ae3">BSPACM_NRF_TWI_BUS_ERROR_UNKNOWN</a>&#160;&#160;&#160;0x400</td></tr>
<tr class="separator:a95b20ef7c77d783469c3f80fe2267ae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e756da414007d55baf3eacfa32e5f7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#a9e756da414007d55baf3eacfa32e5f7b">BSPACM_NRF_APPLY_PAN_36</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a9e756da414007d55baf3eacfa32e5f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d4607e05a4460df2d3204c40de24ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#a38d4607e05a4460df2d3204c40de24ff">BSPACM_NRF_APPLY_PAN_56</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a38d4607e05a4460df2d3204c40de24ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f783009af15527f55f95fd9c338e6f2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#a1f783009af15527f55f95fd9c338e6f2">BSPACM_I2C_MINIMUM_BUS_TIMEOUT_us</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a1f783009af15527f55f95fd9c338e6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a83a6e2460277c4ed52332d22c4e07216"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a83a6e2460277c4ed52332d22c4e07216"></a>
typedef struct <a class="el" href="structsBSPACMi2cBus.html">sBSPACMi2cBus</a>&#160;</td><td class="memItemRight" valign="bottom"><b>sBSPACMi2cBus</b></td></tr>
<tr class="separator:a83a6e2460277c4ed52332d22c4e07216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba2b4b514c1baefd6aacdad0c850b9d"><td class="memItemLeft" align="right" valign="top">typedef const <a class="el" href="structsBSPACMi2cBus.html">sBSPACMi2cBus</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a></td></tr>
<tr class="separator:afba2b4b514c1baefd6aacdad0c850b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e7f8154dba81fe6ced25fca7aada979"><td class="memItemLeft" align="right" valign="top"><a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#a3e7f8154dba81fe6ced25fca7aada979">hBSPACMi2cConfigureBus</a> (<a class="el" href="structsBSPACMi2cBus.html">sBSPACMi2cBus</a> *tpp, NRF_TWI_Type *twi, int sda_pin, int scl_pin, int ppi_chidx, uint32_t frequency, unsigned int timeout_us)</td></tr>
<tr class="separator:a3e7f8154dba81fe6ced25fca7aada979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81c7acb98f2dba56e086ea0ffb0d86c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#af81c7acb98f2dba56e086ea0ffb0d86c">iBSPACMi2cSetEnabled</a> (<a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a> tpp, bool enabled)</td></tr>
<tr class="separator:af81c7acb98f2dba56e086ea0ffb0d86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eba501fe82b0774497d978bbf0becc1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#a3eba501fe82b0774497d978bbf0becc1">iBSPACMi2cRead</a> (<a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a> tpp, unsigned int addr, uint8_t *dp, size_t len)</td></tr>
<tr class="separator:a3eba501fe82b0774497d978bbf0becc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71b0192d209b6c8d541c09cdadd3285"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="twi_8h.html#aa71b0192d209b6c8d541c09cdadd3285">iBSPACMi2cWrite</a> (<a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a> tpp, unsigned int addr, const uint8_t *sp, size_t len)</td></tr>
<tr class="separator:aa71b0192d209b6c8d541c09cdadd3285"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>nRF51-specific support for I2C </p>
<p>Nordic calls this "TWI", but it's I2C so that's what the API uses.</p>
<dl class="section note"><dt>Note</dt><dd>The implementation depends on &lt;<a class="el" href="hires_8h.html" title="nRF51-specific support for high-resolution timers ">bspacm/utility/hires.h</a>&gt; and &lt;<a class="el" href="uptime_8h.html" title="nRF51-specific support for low-resolution uptime clock ">bspacm/utility/uptime.h</a>&gt;</dd></dl>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bspacm">http://github.com/pabigot/bspacm</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2015, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1f783009af15527f55f95fd9c338e6f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_I2C_MINIMUM_BUS_TIMEOUT_us&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The minimum acceptable per-byte timeout for I2C bus transactions, in microseconds. </p>

</div>
</div>
<a class="anchor" id="a9e756da414007d55baf3eacfa32e5f7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_NRF_APPLY_PAN_36&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PAN #36: Shortcuts are not functional Use PPI channel to enforce BB to SUSPEND and STOP tasks.</p>
<p>Define to C preprocessor true value to enable workaround. This impacts the accepted parameters of <a class="el" href="twi_8h.html#a3e7f8154dba81fe6ced25fca7aada979">hBSPACMi2cConfigureBus()</a>.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="a38d4607e05a4460df2d3204c40de24ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_NRF_APPLY_PAN_56&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PAN #56: module lock-up</p>
<p>Various conditions require a full power-cycle of the TWI module to restore functionality. The likelihood of occurrence can be lessened by certain behaviors, but in the end we need to alarm if an expected RXDREADY or TXDREADY signal is not received in a timely manner.</p>
<p>If enabled by defining to a C preprocessor true value the recovery from I2C bus timeouts will include power-cycling the TWI peripheral.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="af4acd238e75e7541287cdf8174336479"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_NRF_TWI_BUS_ERROR_CLEAR_FAILED&#160;&#160;&#160;0x200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit set in absolute value of an error return code when the I2C bus is being held by an unresponsive follower device and the master failed to clear the hold. </p>

</div>
</div>
<a class="anchor" id="adeb833fae78932c5428155f79a655f33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_NRF_TWI_BUS_ERROR_TIMEOUT&#160;&#160;&#160;0x100</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit set in absolute value of an error return code when a bus timeout was discovered. If <a class="el" href="twi_8h.html#a38d4607e05a4460df2d3204c40de24ff">BSPACM_NRF_APPLY_PAN_56</a> is enabled the TWI peripheral will have been power cycled to ensure recovery. </p>

</div>
</div>
<a class="anchor" id="a95b20ef7c77d783469c3f80fe2267ae3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSPACM_NRF_TWI_BUS_ERROR_UNKNOWN&#160;&#160;&#160;0x400</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit set in absolute value of an error return code when the I2C peripheral indicated an error, but the error cause could not be identified. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="afba2b4b514c1baefd6aacdad0c850b9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const <a class="el" href="structsBSPACMi2cBus.html">sBSPACMi2cBus</a>* <a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A handle for a bus configuration </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3e7f8154dba81fe6ced25fca7aada979"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a> hBSPACMi2cConfigureBus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsBSPACMi2cBus.html">sBSPACMi2cBus</a> *&#160;</td>
          <td class="paramname"><em>tpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NRF_TWI_Type *&#160;</td>
          <td class="paramname"><em>twi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sda_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scl_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ppi_chidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout_us</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure the I2C bus structure.</p>
<p>This validates and records all non-address bus configuration data. It does not configure or enable the bus itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tpp</td><td>pointer to the bus structure</td></tr>
    <tr><td class="paramname">twi</td><td>the NRF TWI peripheral used by the bus; generally #NRF_TWI0 or #NRF_TWI1.</td></tr>
    <tr><td class="paramname">sda_pin</td><td>the pin number to used for the I2C SDA functionality.</td></tr>
    <tr><td class="paramname">scl_pin</td><td>the pin number to used for the I2C SCL functionality.</td></tr>
    <tr><td class="paramname">ppi_chidx</td><td>The Programmable Peripheral Interconnect channel used to support the workaround for PAN #36. If <a class="el" href="twi_8h.html#a9e756da414007d55baf3eacfa32e5f7b">BSPACM_NRF_APPLY_PAN_36</a> is enabled this must be a PPI channel (0..15). If <a class="el" href="twi_8h.html#a9e756da414007d55baf3eacfa32e5f7b">BSPACM_NRF_APPLY_PAN_36</a> is disabled this must be -1.</td></tr>
    <tr><td class="paramname">frequency</td><td>the bus frequency, expressed as the value of the NRF_TWI_Type::FREQUENCY register. E.g. #TWI_FREQUENCY_FREQUENCY_K400.</td></tr>
    <tr><td class="paramname">timeout_us</td><td>The maximum time the bus will wait for #TXDREADY or #RXDREADY from a follower device. This relates to <a class="el" href="twi_8h.html#a38d4607e05a4460df2d3204c40de24ff">BSPACM_NRF_APPLY_PAN_56</a> but has the specified effect even if that PAN is not enabled. The timeout is reset on each successful byte transfer, and is implemented as a busy-wait. Remember to account for clock stretching. Values less than <a class="el" href="twi_8h.html#a1f783009af15527f55f95fd9c338e6f2">BSPACM_I2C_MINIMUM_BUS_TIMEOUT_us</a> are adjusted to meet that minimum.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>tpp</code> as handle if the configuration was acceptable, or NULL if a parameter was rejected.</dd></dl>
<p><a class="el" href="twi_8h.html#a9e756da414007d55baf3eacfa32e5f7b">BSPACM_NRF_APPLY_PAN_36</a> </p>

</div>
</div>
<a class="anchor" id="a3eba501fe82b0774497d978bbf0becc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMi2cRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a>&#160;</td>
          <td class="paramname"><em>tpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data from the I2C bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tpp</td><td>the bus to use</td></tr>
    <tr><td class="paramname">addr</td><td>the address of the device from which data will be read. This is the 7-bit address, exclusive of the RW bit.</td></tr>
    <tr><td class="paramname">dp</td><td>where the requested data should be stored</td></tr>
    <tr><td class="paramname">len</td><td>the number of bytes to be read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>len</code> on success, otherwise a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="af81c7acb98f2dba56e086ea0ffb0d86c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMi2cSetEnabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a>&#160;</td>
          <td class="paramname"><em>tpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable or disable the TWI bus configuration.</p>
<dl class="section return"><dt>Returns</dt><dd>Zero if enable (or disable) was successful, otherwise a negative error code. Errors can occur when failing to gain control of a newly enabled bus. </dd></dl>

</div>
</div>
<a class="anchor" id="aa71b0192d209b6c8d541c09cdadd3285"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSPACMi2cWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="twi_8h.html#afba2b4b514c1baefd6aacdad0c850b9d">hBSPACMi2cBus</a>&#160;</td>
          <td class="paramname"><em>tpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write data to the I2C bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tpp</td><td>the bus to use</td></tr>
    <tr><td class="paramname">addr</td><td>the address of the device to which data will be written. This is the 7-bit address, exclusive of the RW bit.</td></tr>
    <tr><td class="paramname">sp</td><td>pointer to the data to be written</td></tr>
    <tr><td class="paramname">len</td><td>the number of bytes to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>len</code> on success, otherwise a negative error code. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 13 2015 19:58:49 for BSPACM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9
</small></address>
</body>
</html>
